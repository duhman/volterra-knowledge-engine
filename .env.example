# =============================================================================
# Volterra Document Ingestion - Environment Configuration
# Copy this file to .env and fill in your values
# =============================================================================

# -----------------------------------------------------------------------------
# REQUIRED - Core Services
# -----------------------------------------------------------------------------

# Supabase Cloud (get from: Supabase Dashboard > Project Settings > API)
# Project: your-supabase-project-id (volterra_kb schema)
SUPABASE_URL=https://your-project.supabase.co
SUPABASE_SERVICE_ROLE_KEY=your_service_role_key

# OpenAI (get from: https://platform.openai.com/api-keys)
OPENAI_API_KEY=sk-...

# -----------------------------------------------------------------------------
# OPTIONAL - Source Integrations
# -----------------------------------------------------------------------------

# Notion (get from: https://www.notion.so/my-integrations)
# Required for: npm run ingest:notion, npm run ingest:support
NOTION_API_KEY=secret_...

# HubSpot (get from: Settings > Integrations > Private Apps)
# Required for: npm run ingest:hubspot
HUBSPOT_API_KEY=pat-...

# SharePoint / Microsoft Graph (Azure AD App Registration)
# Required for: npm run ingest:sharepoint
SHAREPOINT_CLIENT_ID=
SHAREPOINT_CLIENT_SECRET=
SHAREPOINT_TENANT_ID=
SHAREPOINT_SITE_ID=

# n8n (get from: n8n instance > Settings > API)
# Required for: npm run n8n
N8N_API_URL=https://your-n8n.example.com/api/v1
N8N_API_KEY=

# -----------------------------------------------------------------------------
# OPTIONAL - Processing Configuration
# -----------------------------------------------------------------------------

# Batch processing (override config/default.json)
BATCH_SIZE=5
BATCH_CONCURRENCY=1

# Embedding model (default: text-embedding-3-small)
EMBEDDING_MODEL=text-embedding-3-small

# Logging
LOG_LEVEL=info
LOG_FORMAT=json

# GDPR/PII handling
PII_DETECTION_ENABLED=true
PII_REDACTION_MODE=flag

# -----------------------------------------------------------------------------
# SUPABASE EDGE FUNCTIONS (set via: supabase secrets set KEY=value)
# These are NOT used by Node scripts - they're for the Edge Functions
# -----------------------------------------------------------------------------

# SUPABASE_URL              (auto-injected by Supabase)
# SUPABASE_SERVICE_ROLE_KEY (auto-injected by Supabase)
# OPENAI_API_KEY            (same as above, set via secrets)
# CRON_SECRET               (optional: verify cron invocations)
# HUBSPOT_PRIVATE_APP_TOKEN (for hubspot-tickets-sync function)
# SLACK_USER_TOKEN          (xoxp-... for slack-channel-sync function)
# SLACK_CHANNEL_ID          (default: YOUR_SLACK_CHANNEL_ID)
# NOTION_API_KEY            (for notion-pages-sync function)
# ENFORCE_IP_ALLOWLIST      (set to 'true' for production MCP endpoint)
